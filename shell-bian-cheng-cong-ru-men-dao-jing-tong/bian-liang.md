# 变量

### 1.Shell变量详解

#### 定义变量

* **赋值：** `variable_name=value`（注意等号两边不能有空格）。
* **命名规则：** 变量名通常由字母、数字和下划线组成，但不能以数字开头。

#### 变量类型

* **局部变量：** 仅在定义它们的Shell（或Shell脚本）中可见。
* **环境变量：** 在Shell启动后对所有后续的命令可见。可以通过`export`命令将局部变量变成环境变量。

#### 使用变量

* **获取变量值：** 使用`$`符号，如`$variable_name`。
* **双引号和单引号：** 在双引号中可以引用变量，而单引号则将内容视为纯文本，不对变量进行替换。

#### 预定义变量

* **特殊变量：**
  * `$0`：脚本名。
  * `$1`, `$2`, ...：脚本的参数。
  * `$#`：参数的个数。
  * `$?`：上一个命令的退出状态。
  * `$$`：当前Shell进程的进程号。

#### 示例：

```bash
#!/bin/bash
name="Alice" #定义变量
echo $name #输出变量值

greetting="Hello,$name" #变量嵌套
echo "$greeting0"

#特殊变量
echo "Script name: $0"
echo "First argument: $1"
echo "Number of argument: $#"
```

#### 特色变量操作

* **修改变量：** `export variable_name=new_value`可修改环境变量。
* **删除变量：** 使用 `unset variable_name` 来删除变量。

注意事项：

* **变量赋值等号两侧不能有空格。**
* **引用变量时最好使用双引号，以避免意外的空格或特殊字符解析问题。**

在Shell脚本中，变量的作用域是指变量可以被访问的范围。作用域可以是全局的或局部的，这取决于变量的定义位置以及是否使用了特定的声明或导出方式。

#### 全局变量和局部变量

* **全局变量：** 在整个Shell会话中都可见。通常通过在脚本最外层定义，或使用`export`命令来创建。
* **局部变量：** 仅在定义它们的代码块、函数或脚本中可见。

#### 作用域规则

* **全局变量：** 如果在Shell脚本的最外层或使用`export`命令声明，那么该变量在整个Shell会话中都可见，包括被调用的脚本。
* **局部变量：** 在函数内部定义的变量通常是局部的，只在函数内部可见。在函数外部无法访问这些变量，它们不会影响到全局作用域中的同名变量。

#### 示例：

```bash
bashCopy code#!/bin/bash

# 全局变量
global_var="I'm global"

# 函数内的局部变量
my_function() {
    local local_var="I'm local"
    echo "Inside function: $local_var"
}

echo "Global variable: $global_var"
my_function
echo "Outside function: $local_var"  # 这里将无法访问 local_var
```

在示例中，`global_var` 是全局变量，因此在整个脚本中可见。而 `local_var` 是在函数内部定义的局部变量，只在函数内部可见。

#### 函数和子进程

* **函数中的变量：** 在函数中定义的变量通常是局部的，除非使用`export`声明为全局。
* **子进程中的变量：** 在使用`$(...)`或反引号执行命令时，会在子shell中运行，其中的变量通常是局部的。

#### 注意事项：

* **子shell和父shell之间的变量不共享。**
* **对于并行脚本或子shell，变量值不会在它们之间传递。**

***

### &#x20;
